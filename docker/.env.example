# Jarvis Inc — Environment Variables
# ====================================
# Copy this to .env and fill in your values:
#   cp .env.example .env

# ─── Domain ──────────────────────────────────────────────────
# Your domain/hostname. Used for Caddy routing and Supabase config.
#
# Examples:
#   LAN only:      jarvis.local  or  192.168.1.100.nip.io
#   Internet:      jarvis.example.com
#   Local dev:     localhost
DOMAIN=jarvis.local

# ─── SSL / TLS Mode ─────────────────────────────────────────
# Controls how Caddy handles HTTPS:
#
#   internal    → Self-signed certs (default, good for LAN / local dev)
#   (empty)     → Auto HTTPS via Let's Encrypt (requires port 80 open to internet)
#   off         → Plain HTTP only (if behind another reverse proxy)
#
# For Let's Encrypt, leave this empty and ensure port 80 is reachable:
#   CADDY_TLS=
CADDY_TLS=internal

# ─── Studio Protection ───────────────────────────────────────
# Basic auth for Supabase Studio at studio.${DOMAIN}
# Username:
STUDIO_USER=admin
# Password (cleartext saved by setup.mjs for reference):
# STUDIO_PASS_CLEARTEXT=your-studio-password
# Password hash — generate with:
#   docker run --rm caddy:2-alpine caddy hash-password --plaintext 'YOUR_PASSWORD'
STUDIO_PASS_HASH=$2a$14$CHANGE_ME_RUN_CADDY_HASH_PASSWORD

# ─── Postgres ────────────────────────────────────────────────
POSTGRES_PASSWORD=your-super-secret-db-password
POSTGRES_DB=postgres
POSTGRES_PORT=5432

# ─── Supabase JWT ────────────────────────────────────────────
# Must be at least 32 characters. Generate with:
#   openssl rand -base64 32
JWT_SECRET=your-jwt-secret-at-least-32-characters-long
JWT_EXP=3600

# ─── Supabase API Keys ──────────────────────────────────────
# Generate from your JWT_SECRET:
#   npx supabase@latest jwt generate --jwt-secret "$JWT_SECRET" --role anon
#   npx supabase@latest jwt generate --jwt-secret "$JWT_SECRET" --role service_role
ANON_KEY=GENERATE_WITH_COMMAND_ABOVE
SERVICE_ROLE_KEY=GENERATE_WITH_COMMAND_ABOVE

# ─── Supabase Realtime ───────────────────────────────────────
# Generate with: openssl rand -base64 48
SECRET_KEY_BASE=your-secret-key-base-at-least-64-chars

# ─── Edge Functions ─────────────────────────────────────────
# JWT verification for edge function requests (disable for local dev)
FUNCTIONS_VERIFY_JWT=false

# ─── Passkey / WebAuthn ──────────────────────────────────────
# Passkeys are enabled by default. The RP ID is derived from DOMAIN.
# Passkeys only work over HTTPS (self-signed OK for dev, Let's Encrypt for prod).
# To disable passkeys, set in docker-compose.yml:
#   GOTRUE_EXTERNAL_WEBAUTHN_ENABLED: "false"
